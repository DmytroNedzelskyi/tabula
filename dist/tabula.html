<!DOCTYPE html><html lang="en"><head><title>Tabula</title><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>*{box-sizing:border-box}:root{--primary-color:#af1c1c9e;--secondary-color:#e9dddb;--primary-text-color:#000b29;--secondary-text-color:#626d71b1;--background-color:#fff}html,body{color:var(--primary-text-color);margin:0;padding:0;font-family:Verdana,Geneva,Tahoma,sans-serif}body{min-width:350px;width:80%;margin-left:auto;margin-right:auto}header{height:80px;justify-content:space-between;align-items:center;padding:0;display:flex}footer{height:40px;flex-wrap:wrap;justify-content:end;align-items:center;gap:8px;padding:0;display:flex}header h1{margin:0;padding:0;font-weight:50}header h1:first-child:first-letter{color:var(--primary-color);vertical-align:4px;font-size:1em}tabula-alert{flex-grow:1;justify-self:left}@media screen and (width<=500px) and (height<=1000px){tabula-clock{display:none}}</style><script type="module" defer>var t;const e=class t extends HTMLElement{static #t=(()=>{this.CONSTANTS={TAG:"tabula-clock"}})();constructor(){super(),this.state={timerId:0},this.root=this.attachShadow({mode:"closed"})}static get tagName(){return t.CONSTANTS.TAG}connectedCallback(){this.render();let t=window.setInterval(()=>this.render(),1e3);this.state={...this.state,timerId:t}}disconnectedCallback(){window.clearInterval(this.state.timerId),this.state={...this.state,timerId:0}}render(){this.root.hasChildNodes()||(this.root.innerHTML=t.createHTML());let e=this.parseDate(new Date),s=this.root.querySelector("#clock");s.innerHTML=e}parseDate(t){let e=t.toLocaleDateString(),s=12>t.getHours()?"AM":"PM",r=t.toLocaleTimeString("en-US",{hour12:!1,hour:"numeric",minute:"numeric",second:"numeric"});return`${e} ${r} ${s}`}static register(){customElements.get(t.tagName)||customElements.define(t.tagName,t)}static createHTML(){return`
      <style>
        * {
          box-sizing: border-box;
        }
        span {
          color: var(--secondary-text-color, inherit);
          font-size: 0.9em;
          padding: 8px;
        }
      </style>
      <span id="clock"></span>
    `}},s=class t extends HTMLElement{static #t=(()=>{this.CONSTANTS={TAG:"tabula-alert",ATTRIBUTES:["timeout"],DEFAULT_TIMEOUT:2e3}})();constructor(){super(),this.state={alertsQueue:[],broadcastProcessId:0,broadcastTimeout:t.CONSTANTS.DEFAULT_TIMEOUT},this.root=this.attachShadow({mode:"closed"})}static get tagName(){return t.CONSTANTS.TAG}static get observedAttributes(){return Object.freeze(t.CONSTANTS.ATTRIBUTES)}broadcast(t){0!==t.length&&(this.state={...this.state,alertsQueue:[...this.state.alertsQueue,t]},this.state.broadcastProcessId>0||this.render())}connectedCallback(){this.render()}disconnectedCallback(){this.state.broadcastProcessId>0&&window.clearTimeout(this.state.broadcastProcessId)}attributeChangedCallback(e,s,r){if("timeout"===e)this.state={...this.state,broadcastTimeout:Number.parseInt(r)};else throw Error(`Invalid attribute ${e} for <${t.tagName}> element.`)}render(){this.root.hasChildNodes()||(this.root.innerHTML=t.createHTML());let e=this.root.querySelector("#alert"),s=this.state.alertsQueue[0];if(this.state={...this.state,alertsQueue:[...this.state.alertsQueue.slice(1)]},!s?.length){this.state={...this.state,broadcastProcessId:0},e.innerHTML="";return}e.innerHTML=s;let r=window.setTimeout(()=>this.render(),this.state.broadcastTimeout);this.state={...this.state,broadcastProcessId:r}}static register(){customElements.get(t.tagName)||customElements.define(t.tagName,t)}static createHTML(){return`
      <style>
        * {
          box-sizing: border-box;
        }
        code {
          color: var(--secondary-text-color, initial);
          font-size: 1.1em;
          padding: 8px;
        }
      </style>
      <code id="alert"></code>
    `}},r=class t extends HTMLElement{static #t=(()=>{this.CONSTANTS={TAG:"tabula-note",ATTRIBUTES:["placeholder"]}})();constructor(){super(),this.state={placeholder:"",value:""},this.root=this.attachShadow({mode:"closed"})}get value(){return this.textareaElement.value}set value(t){this.state.value!==t&&(this.state={...this.state,value:t},this.render())}get textareaElement(){return this.root.querySelector("#note")}static get tagName(){return t.CONSTANTS.TAG}static get observedAttributes(){return Object.freeze(t.CONSTANTS.ATTRIBUTES)}connectedCallback(){this.render(),this.textareaElement.addEventListener("input",()=>this.handleInput())}disconnectedCallback(){this.textareaElement.removeEventListener("input",()=>this.handleInput())}attributeChangedCallback(e,s,r){if("placeholder"===e)this.state={...this.state,placeholder:r};else throw Error(`Invalid attribute ${e} for <${t.tagName}> element.`)}render(){this.root.hasChildNodes()||(this.root.innerHTML=t.createHTML()),this.textareaElement.placeholder=this.state.placeholder,this.textareaElement.value=this.state.value}handleInput(){this.dispatchEvent(new CustomEvent("input",{bubbles:!0,composed:!0,detail:{value:this.value}}))}static register(){customElements.get(t.tagName)||customElements.define(t.tagName,t)}static createHTML(){return`
      <style>
        * {
          box-sizing: border-box;
        }

        textarea {
          height: 80vh;
          width: 100%;
          padding: 16px;
          font-size: 1.5em;
          outline: none;
          border: 0;
          border-top: 2px dotted var(--secondary-color);
          border-bottom: 2px dotted var(--secondary-color);
          resize: none;
          color: var(--primary-text-color);
        }

        * {
          scrollbar-width: thin;
          scrollbar-color: var(--secondary-color) var(--background-color);
        }

        *::-webkit-scrollbar {
          cursor: pointer;
          width: 16px;
          height: 4px;
        }

        *::-webkit-scrollbar-track {
          background: var(--background-color);
        }

        *::-webkit-scrollbar-thumb {
          background-color: var(--secondary-color);
          height: 8px;
          border-radius: 4px;
          border: 4px solid var(--background-color);
        }
      </style>
      <section>
        <textarea id="note"></textarea>
      </section>
    `}};(t||(t={})).NOTES_STORAGE_KEY="tabula.notes";class a{constructor(t){this.storageProvider=t}read(t){return this.storageProvider.getItem(t)}write(t,e){this.storageProvider.setItem(t,e)}}class o extends CustomEvent{static #t=(()=>{this.typeName="notify-user"})();constructor(t){super(o.typeName,t)}static create(t){return new o({detail:{alertMessage:t}})}}class i{get alertComponent(){return document?.querySelector(s.tagName)}constructor(t){t.addEventListener(o.typeName,t=>this.onNotifyUserHandler(t))}onNotifyUserHandler(t){this.alertComponent&&this.alertComponent.broadcast(t.detail.alertMessage)}}class n{static #t=(()=>{this.CONSTANTS={AUTO_SAVE_TIMEOUT:15e3,MSG_LOADING:"Loading notes ...",MSG_SAVING:"Saving notes ...",MSG_SAVED:"Notes saved."}})();get noteComponent(){return document.querySelector(r.tagName)}get storage(){return this.app.resolveService(a)}constructor(t){this.app=t,this.isDirty=!1,this.noteComponent.value=this.readNotes(),this.noteComponent.addEventListener("input",()=>this.isDirty=!0),setInterval(()=>this.autoSaveHandler(),n.CONSTANTS.AUTO_SAVE_TIMEOUT)}readNotes(){return this.app.dispatchEvent(o.create(n.CONSTANTS.MSG_LOADING)),this.storage.read(t.NOTES_STORAGE_KEY)||this.saveNotes(""),this.storage.read(t.NOTES_STORAGE_KEY)??""}saveNotes(e){this.app.dispatchEvent(o.create(n.CONSTANTS.MSG_SAVING)),this.storage.write(t.NOTES_STORAGE_KEY,e),this.app.dispatchEvent(o.create(n.CONSTANTS.MSG_SAVED))}autoSaveHandler(){this.isDirty&&(this.saveNotes(this.noteComponent.value),this.isDirty=!1)}}class c extends EventTarget{static #t=(()=>{this.AppBuilder=class{registerComponents(t){return t.forEach(t=>t.register()),this}registerService(t,e){return this.services.set(t,e),this}create(){return new c(this.services)}constructor(){this.services=new Map}}})();constructor(t){super(),this.services=t}static get builder(){return new c.AppBuilder}resolveService(t){return this.services.get(t)??null}run(){new i(this),new n(this)}}document.addEventListener("DOMContentLoaded",async()=>{c.builder.registerComponents([r,e,s]).registerService(a,new a(window.localStorage)).create().run()});</script><link rel="icon" type="image/x-icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJmZWF0aGVyIGZlYXRoZXItY2xpcGJvYXJkIj48cGF0aCBkPSJNMTYgNGgyYTIgMiAwIDAgMSAyIDJ2MTRhMiAyIDAgMCAxLTIgMkg2YTIgMiAwIDAgMS0yLTJWNmEyIDIgMCAwIDEgMi0yaDIiPjwvcGF0aD48cmVjdCB4PSI4IiB5PSIyIiB3aWR0aD0iOCIgaGVpZ2h0PSI0IiByeD0iMSIgcnk9IjEiPjwvcmVjdD48L3N2Zz4="></head><body> <header> <h1>[T]abula</h1> </header> <main> <tabula-note placeholder="Enter your notes here."></tabula-note> </main> <footer> <tabula-alert></tabula-alert> <tabula-clock></tabula-clock> </footer> </body></html>